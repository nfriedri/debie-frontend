<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>DEBIE - Webapp</title>
	<link href="https://getbootstrap.com/docs/4.2/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
	<!--link href="style.css" rel="stylesheet">-->
</head>
<body class="bg-light">

<!-- Navigation -->
    <nav class="navbar navbar-expand-md navbar-light bg-light sticky-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="index.html"><img src="img/logo.png" width="15%"></a>  
            <button class="navbar-toggler ml-auto" type="button" data-toggle="collapse" data-target="#navbarResponsive">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="about.html">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="bias-evaluation.html" style=" white-space:nowrap;">Bias Evaluation</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="debiasing.html">Debiasing</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="jumbotron mb-0" style="background-image: url(img/background.jpg)">
        <div class="container">
            <h1 class="display-1 mb-3" style="color: #222E58;" ><b>DEBIE</b></h1>
            <p class="lead text-dark ml-2"><b>DEBiasing embeddings Implicitly and Explicitly </b></p>
            <hr class="my-4" style="border: 1px solid black;">
            <p class="text-dark ml-2">Web application for debiasing embedding spaces and bias evaluation of explicit and implicit bias specifications</p>
            <p class="lead">
            <p class="text-light"><a class="btn btn-primary btn-lg" role="button" id="start" style="background-color: #222E58; border-color: #FFFFFF;">Start DEBIE &raquo;</a></p>
        </div>
    </div>

    <div class="container-fluid" id="container1">
        <script src="js/main.js"></script>

        <div class="container text-dark py-3" id="spaceContainer">
            <hr class="my-4" style="border: 1px solid black;">
            <h5 class="display-5 my-2">Select the embedding space on which you would like to operate:</h5>
            <br>
            <div class="btn-group btn-group-toggle" data-toggle="buttons" id="word_embedding">
                <label class="btn btn-secondary btn-lg active" id="fasttext">
                    <input type="radio" name="options" autocomplete="off" checked> Fasttext
                </label>
                <!--
                <label class="btn btn-secondary" id="skipgram">
                    <input type="radio" name="options" autocomplete="off"> Skipgram
                </label>
                -->
                <label class="btn btn-secondary btn-lg"  id="glove">
                    <input type="radio" name="options" autocomplete="off"> GloVe
                </label>
                <label class="btn btn-secondary btn-lg"  id="cbow">
                    <input type="radio" name="options" autocomplete="off"> CBOW
                </label>
                <label class="btn btn-secondary btn-lg"  id="upload">
                    <input type="radio" name="options" autocomplete="off"> Upload Embeddings    
                </label>  
            </div>
            <a class="btn btn-primary btn-lg ml-auto text-light" role="button" id="selectSpace" style="background-color: #222E58; border-color: #FFFFFF; float: right;">Confirm</a>
            <hr class="mt-4" style="border: 1px solid black;">
        </div>

        <div class="container text-dark py-3 " id="uploadContainer">
            
            <h5 class="display-5 mb-4">Upload a embedding space here</h5>
            <div class="custom-control custom-switch float-right">
                <input type="checkbox" class="custom-control-input" id="binarySwitch" onclick="showSwitch()">
                <label class="custom-control-label" for="binarySwitch">Separated Vocab and Vec File</label>
            </div>
           
            <div class="custom-file mb-2" id="uploadVocab" hidden>
                <input type="file" class="custom-file-input" id="inputVocab">
                <label class="custom-file-label" for="inputVocab" id="inputVocabLabel">Choose vocab file</label>
            </div>
            <div class="custom-file mb-2" id=uploadVecs>
                <input type="file" class="custom-file-input" id="inputVecs">
                <label class="custom-file-label" for="inputVecs" id="inputVecsLabel">Choose vector file</label>
            </div>
            <button class="btn btn-primary my-2" id='uploadButton' style="background-color: #222E58; border-color: #FFFFFF;">Upload space</button>     
             <script>
                var switcher = document.getElementById('binarySwitch');
                var inputVocab = document.getElementById('uploadVocab');
                function showSwitch(){
                    console.log('Function is executed')
                    if (switcher.checked == false){
                        inputVocab.setAttribute('hidden', true);
                    }
                    else if (switcher.checked == true){
                        inputVocab.removeAttribute('hidden');
                    }
                }
            </script>
            <!--TODO: Upload Progress Bar-->
            
            <hr class="mt-4" style="border: 1px solid black;">
        </div>

        <div class="container text-dark py-3" id="operationContainer">

            <h5 class="display-5 mb-4">Do you want to evaluate a bias specification or do you want to test a debiasing method?</h5>
            <div class="card-deck">
                <div class="card bg-secondary text-white mx-3" >
                    <div class="card-body">
                        <h5 class="card-title">Bias Evaluation</h5>
                        <hr class="bg-white">
                        <p>Either pre-defined bias specifications or self-defined specifications can be evaluated here</p>
                        <p>Following scores are provided for evaluating the contained bias: ECT, BAT, WEAT, K-Means++</p>
                        <a class="btn btn-primary btn-lg text-light" role="button" id="biasEvaluation" style="background-color: #222E58; border-color: #FFFFFF;">Bias Evaluation</a>
                        <br>
                    </div>
                </div>
                <div class="card bg-secondary text-white mx-3" >
                    <div class="card-body">
                        <h5 class="card-title">Debiasing</h5>
                        <hr class="bg-white">
                        <p>Either pre-defined bias specifications or self-defined specifications can be debiased here</p>
                        <p>Following debiasing methods are provided: BAM, GBDD, BAM x GBDD, GBDD x BAM</p>
                        <a class="btn btn-primary btn-lg text-light" role="button" id="debiasing" style="background-color: #222E58; border-color: #FFFFFF;">Debiasing</a>
                        <br>
                    </div>
                </div>
            </div>
            <hr class="mt-4" style="border: 1px solid black;">
        </div>
        
        <div class="container text-dark py-3" id="specificationContainer">
            <h4 class="display-4" id="operationHeader">Bias Evaluation</h4> <!--TODO: Change Header between Bias Eval and Debiasing-->
            <h5 class="display-5 my-3 mb-4">Use a pre-defined test set or define one on your own?</h5>
            <div class="card-deck">
                <div class="card bg-secondary text-white mx-3" >
                    <div class="card-body">
                        <h5 class="card-title">Pre-defined Test Sets</h5>
                        <hr class="bg-white">
                        <p>Evaluate bias specification test sets from WEAT by <a href="https://arxiv.org/abs/1608.07187" style="color:darkturquoise;">Caliskan et al.</a> </p>
                        <a class="btn btn-primary btn-lg text-light" role="button" id="biasEvaluation" style="background-color: #222E58; border-color: #FFFFFF;">Pre-Defined Sets</a>
                        <br>
                    </div>
                </div>
                <div class="card bg-secondary text-white mx-3" >
                    <div class="card-body">
                        <h5 class="card-title">Self-Defined Test Sets</h5>
                        <hr class="bg-white">
                        <p>Enter a self-defined test set here and retrieve a bias evaluation</p>
                        <a class="btn btn-primary btn-lg text-light" role="button" id="debiasing" style="background-color: #222E58; border-color: #FFFFFF;">Self-Defined Sets</a>
                        <br>
                    </div>
                </div>
            </div>
            <hr class="mt-4" style="border: 1px solid black;">
        </div>

        <div class="container text-dark py-3" id="predefinedContainer">  
            <h4 class="mt-4">Select one predefined test set</h4>
            <div class="custom-control custom-switch float-right">
                <input type="checkbox" class="custom-control-input" id="lowerSwitch">
                <label class="custom-control-label" style="color: black;" for="lowerSwitch">Lower</label>
            </div>
            <div id="tables">
                <table class="table table-borderless table-dark mb-0">
                    <thead>
                      <tr>
                        <th scope="col"><a class="btn" role="button">#</a></th>
                        <th scope="col" id="name1"><a class="btn" role="button"><b>WEAT T8 - Gender vs. Science &raquo;</a></b></th>
                      </tr>
                    </thead>
                    <tbody id="table_1" hidden>
                        <tr>
                            <th scope="row">T1</th>
                            <td>science technology physics chemistry Einstein NASA experiment astronomy</td>
                        </tr>
                          <tr>
                            <th scope="row">T2</th>
                            <td>poetry art Shakespeare dance literature novel symphony drama</td>
                          </tr>
                          <tr>
                            <th scope="row">A1</th>
                            <td>brother father uncle grandfather son he his him</td> 
                          </tr>
                          <tr>
                            <th scope="row">A2</th>
                            <td>sister mother aunt grandmother daughter she hers her</td> 
                          </tr>
                    </tbody>
                </table>
                <div class="container my-0 pt-2" id="evalBtnDiv" style="background-color: #212429;" hidden>
                    <button type="button" class="btn btn-primary btn-lg my-2" style="background-color: #222E58; border-color: #FFFFFF;" id="evaluate">Evaluate</button> 
                </div>
                <script>
                    table = document.getElementById("name1")
                    content = document.getElementById("table_1")
                    evalBtnDiv = document.getElementById("evalBtnDiv")
                    function show(){
                        if (content.getAttribute('hidden') == null) {
                            content.setAttribute('hidden', 'true');
                            evalBtnDiv.setAttribute('hidden', 'true');
                            return 1;
                        }
                        else {
                            content.removeAttribute('hidden');
                            evalBtnDiv.removeAttribute('hidden');
                            return 0;
                        }
                    }
                    table.addEventListener("click", function () {show()})
                </script>
            </div>
            
            <div class="card text-white mb-2" id="card1" style="background-color: black;" hidden>
                <div class="card-body" id="card_words_response"> 
                </div> 
                <input type="image" src="img/download.png" height="10%" width="10%" id="download1"></input>
            </div>
            <hr class="mt-4" style="border: 1px solid black;">
        </div>
          

    </div>

    <footer class="container-fluid bg-light">
        <hr class="mb-5" style="border-color: #222E58;">
        <div class="row">
            <div class="col-12 col-md">
            <img src="img/logo.png" width="40%">
            <small class="d-block mb-3 ml-4 text-muted">&copy; 2020</small>
            </div>
            <div class="col-6 col-md">
                <h5 style="color: #222E58;">About</h5>
                <ul class="list-unstyled text-small">
                    <li><a class="text-muted" href="https://arxiv.org/abs/1607.04606">fastText</a></li>
                    <li><a class="text-muted" href="https://arxiv.org/pdf/1301.3781.pdf">SkipGram & CBOW</a></li>
                    <li><a class="text-muted" href="https://nlp.stanford.edu/pubs/glove.pdf">GloVe</a></li>
                    <li><a class="text-muted" href="/about.html">Vector sources</a></li>
                </ul>
            </div>
            <div class="col-6 col-md">
                <h5 style="color: #222E58;">Related Work</h5>
                <ul class="list-unstyled text-small">
                    <li><a class="text-muted" href="https://arxiv.org/abs/1909.06092">General Framework</a></li>
                    <li><a class="text-muted" href="https://papers.nips.cc/paper/6228-man-is-to-computer-programmer-as-woman-is-to-homemaker-debiasing-word-embeddings.pdf">Bolukbasi et al. 2016</a></li>
                    <li><a class="text-muted" href="https://arxiv.org/abs/1608.07187">Caliskan et al. 2017</a></li>
                    <li><a class="text-muted" href="http://proceedings.mlr.press/v89/dev19a/dev19a.pdf">Dev & Philips 2019</a></li>
                </ul>
            </div>
            <div class="col-6 col-md">
                <h5 style="color: #222E58;">Impressum</h5>
                <ul class="list-unstyled text-small">
                    <li><a class="text-muted">Bachelor Thesis by Niklas Friedrich</a></li>
                    <li><a class="text-muted">Supervised by Anne Lauscher and Prof. Dr. Goran Glava≈°</a></li>
                    <li><a class="text-muted" href="https://www.uni-mannheim.de/dws/">Data and Web Science Group</a></li>
                    <li><a class="text-muted" href="https://www.uni-mannheim.de">University of Mannheim</a></li>
                </ul>
            </div>
        </div>
    </footer>

</body>


